{"ast":null,"code":"import _slicedToArray from \"/home/sheku/WebstormProjects/auth/auth-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/sheku/WebstormProjects/auth/auth-frontend/src/components/login.js\";\nimport React, { Fragment, useState } from \"react\";\nimport { useMutation } from \"@apollo/react-hooks\";\nimport { useHistory, useLocation } from 'react-router-dom';\nimport gql from \"graphql-tag\";\nimport { Button, Card, Row, Col, TextInput } from 'react-materialize';\nconst LOGIN = gql`\n    mutation login($email: String! $password: String!) {\n        login(email: $email, password: $password)\n        }\n`;\n\nconst useQuery = () => {\n  return new URLSearchParams(useLocation().search);\n};\n\nconst Login = () => {\n  // setting the states\n  const _useState = useState(\"\"),\n        _useState2 = _slicedToArray(_useState, 2),\n        email = _useState2[0],\n        setEmail = _useState2[1];\n\n  const _useState3 = useState(\"\"),\n        _useState4 = _slicedToArray(_useState3, 2),\n        password = _useState4[0],\n        setPassword = _useState4[1];\n\n  const _useState5 = useState(null),\n        _useState6 = _slicedToArray(_useState5, 2),\n        success = _useState6[0],\n        setSuccess = _useState6[1];\n\n  const query = useQuery();\n  const history = useHistory();\n\n  const _useMutation = useMutation(LOGIN, {\n    onCompleted(result) {\n      setSuccess(true);\n      const redirect = query.redirect;\n      history.push(redirect);\n    },\n\n    onError(error) {\n      setSuccess(false);\n    }\n\n  }),\n        _useMutation2 = _slicedToArray(_useMutation, 1),\n        login = _useMutation2[0];\n\n  return React.createElement(\"div\", {\n    className: \"container center-align\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40\n    },\n    __self: this\n  }, React.createElement(Row, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41\n    },\n    __self: this\n  }, React.createElement(Col, {\n    s: 12,\n    className: \"white-text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }, \"Sign up\"))), React.createElement(\"div\", {\n    className: \"valign-wrapper\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }, React.createElement(Row, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, React.createElement(Col, {\n    s: 12,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, React.createElement(Card, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, React.createElement(\"form\", {\n    onSubmit: e => {\n      e.preventDefault(); // login({\n      //     variables: {\n      //         email,\n      //         password\n      //     }\n      // }).catch(e => {\n      //     console.log(e);\n      // })\n\n      const redirect = query.get('redirect');\n      console.log(redirect);\n      window.location.assign(redirect);\n    },\n    id: \"cred-form\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, React.createElement(Row, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, React.createElement(TextInput, {\n    s: 12,\n    label: \"Email\",\n    email: true,\n    error: \"Invalid email\",\n    validate: true,\n    value: email,\n    onChange: e => {\n      setEmail(e.target.value);\n    },\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  })), React.createElement(Row, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, React.createElement(TextInput, {\n    s: 12,\n    label: \"Password\",\n    password: true,\n    value: password,\n    onChange: e => {\n      setPassword(e.target.value);\n    },\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  })), success !== null && React.createElement(Row, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: success ? \"green-text darken-3\" : \"red-text darken-red\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, success ? \"Account successfully created\" : \"Unable to create account with details provided\")), React.createElement(Row, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, React.createElement(Button, {\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, \"Submit\"))))))));\n};\n\nexport default Login;","map":{"version":3,"sources":["/home/sheku/WebstormProjects/auth/auth-frontend/src/components/login.js"],"names":["React","Fragment","useState","useMutation","useHistory","useLocation","gql","Button","Card","Row","Col","TextInput","LOGIN","useQuery","URLSearchParams","search","Login","email","setEmail","password","setPassword","success","setSuccess","query","history","onCompleted","result","redirect","push","onError","error","login","e","preventDefault","get","console","log","window","location","assign","target","value"],"mappings":"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","sourcesContent":["import React, {Fragment, useState} from \"react\";\nimport {useMutation} from \"@apollo/react-hooks\";\nimport {useHistory, useLocation} from 'react-router-dom'\nimport gql from \"graphql-tag\";\nimport {Button, Card, Row, Col, TextInput} from 'react-materialize'\n\nconst LOGIN = gql`\n    mutation login($email: String! $password: String!) {\n        login(email: $email, password: $password)\n        }\n`;\n\nconst useQuery = () => {\n    return new URLSearchParams(useLocation().search);\n};\n\nconst Login = () => {\n    // setting the states\n    const [email, setEmail] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n    const [success, setSuccess] = useState(null);\n\n    const query = useQuery();\n    const history = useHistory();\n\n    const [login] = useMutation(LOGIN, {\n        onCompleted(result) {\n            setSuccess(true);\n            const redirect = query.redirect;\n            history.push(redirect)\n        },\n\n        onError(error) {\n\n            setSuccess(false)\n        }\n    });\n\n    return (\n        <div className={\"container center-align\"}>\n            <Row>\n                <Col s={12} className={\"white-text\"}>\n                    <h2>Sign up</h2>\n                </Col>\n            </Row>\n            <div className={\"valign-wrapper\"}>\n                <Row>\n                    <Col s={12}>\n                        <Card>\n                            <form onSubmit={e => {\n                                e.preventDefault();\n\n                                // login({\n                                //     variables: {\n                                //         email,\n                                //         password\n                                //     }\n                                // }).catch(e => {\n                                //     console.log(e);\n                                // })\n                                const redirect = query.get('redirect');\n                                console.log(redirect);\n                                window.location.assign(redirect)\n                            }} id={\"cred-form\"}>\n                                <Row>\n                                    <TextInput s={12} label={\"Email\"} email error={\"Invalid email\"} validate\n                                               value={email}\n                                               onChange={(e) => {\n                                                   setEmail(e.target.value);\n                                               }} required/>\n                                </Row>\n                                <Row>\n                                    <TextInput s={12} label={\"Password\"} password value={password} onChange={(e) => {\n                                        setPassword(e.target.value);\n                                    }} required/>\n                                </Row>\n                                {\n                                    success !== null &&\n                                    <Row>\n                                        <p className={success ? \"green-text darken-3\" : \"red-text darken-red\"}>\n                                            {success ? \"Account successfully created\" : \"Unable to create account with details provided\"}\n                                        </p>\n                                    </Row>\n                                }\n                                <Row>\n                                    <Button type={\"submit\"}>Submit</Button>\n                                </Row>\n                            </form>\n                        </Card>\n                    </Col>\n                </Row>\n            </div>\n        </div>\n    )\n};\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}